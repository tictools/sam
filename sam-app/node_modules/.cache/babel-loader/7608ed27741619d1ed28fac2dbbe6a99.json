{"ast":null,"code":"import _slicedToArray from \"/Users/jaume/Documents/sam/sam-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jaume/Documents/sam/sam-app/src/components/StudentUpdate/index.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport MyContext from '../ProviderContext';\nimport logic from \"../../logic\";\nimport Feedback from \"../Feedback\";\nimport './index.sass';\nimport \"../../styles/form.sass\";\n\nfunction UpdateStudent({\n  history\n}) {\n  const _useContext = useContext(MyContext),\n        studentId = _useContext.studentId;\n\n  const _useState = useState(undefined),\n        _useState2 = _slicedToArray(_useState, 2),\n        student = _useState2[0],\n        setStudent = _useState2[1];\n\n  const _useState3 = useState(undefined),\n        _useState4 = _slicedToArray(_useState3, 2),\n        _name = _useState4[0],\n        setName = _useState4[1];\n\n  const _useState5 = useState(undefined),\n        _useState6 = _slicedToArray(_useState5, 2),\n        _surname = _useState6[0],\n        setSurname = _useState6[1];\n\n  const _useState7 = useState(undefined),\n        _useState8 = _slicedToArray(_useState7, 2),\n        _birthdate = _useState8[0],\n        setBirthdate = _useState8[1];\n\n  const _useState9 = useState(undefined),\n        _useState10 = _slicedToArray(_useState9, 2),\n        _healthcard = _useState10[0],\n        setHealthcard = _useState10[1];\n\n  const _useState11 = useState(undefined),\n        _useState12 = _slicedToArray(_useState11, 2),\n        result = _useState12[0],\n        setResult = _useState12[1];\n\n  useEffect(() => {\n    async function retrieveStudent(id) {\n      try {\n        const response = await logic.retrieveStudent(id);\n        setStudent(response.student);\n        setName(response.student.name);\n        setSurname(response.student.surname);\n        setBirthdate(response.student.birthdate);\n        setHealthcard(response.student.healthcard);\n      } catch (_ref) {\n        let message = _ref.message;\n        history.push(\"./home\");\n      }\n    }\n\n    retrieveStudent(studentId);\n  }, [setStudent, setName, setSurname, setBirthdate, setHealthcard, history, studentId]);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    handleUpdate(studentId, _name, _surname, _birthdate, _healthcard);\n  }\n\n  async function handleUpdate(studentId, _name, _surname, birthdate, healthcard) {\n    try {\n      await logic.updateStudent(studentId, _name, _surname, birthdate, healthcard);\n      history.push(\"/update-success\");\n    } catch (_ref2) {\n      let message = _ref2.message;\n      console.log(message);\n      console.log(student.healthcard);\n      setResult(logic.translateMessage(message, undefined, student.healthcard));\n    }\n  }\n\n  return React.createElement(\"div\", {\n    className: \"form-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, student && React.createElement(\"h1\", {\n    className: \"home-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \"Formulari d'actualitzaci\\xF3\"), student && React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"fieldset\", {\n    className: \"fieldset\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"legend\", {\n    className: \"fieldset__legend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Dades de l'inscrit/a\"), React.createElement(\"section\", {\n    className: \"fieldset__body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"input-block__label\",\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Nom\"), React.createElement(\"input\", {\n    className: \"input-block__input\",\n    type: \"text\",\n    name: \"name\",\n    value: _name,\n    onChange: event => setName(event.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"input-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"input-block__label\",\n    htmlFor: \"surname\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Cognoms\"), React.createElement(\"input\", {\n    className: \"input-block__input\",\n    type: \"text\",\n    name: \"surname\",\n    value: _surname,\n    onChange: event => setSurname(event.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"input-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"input-block__label\",\n    htmlFor: \"birthdate\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Data de naixement\"), React.createElement(\"input\", {\n    className: \"input-block__input\",\n    type: \"text\",\n    name: \"birthdate\",\n    value: _birthdate,\n    onChange: event => setBirthdate(event.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"input-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"input-block__label\",\n    htmlFor: \"healthcard\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"Targeta sanit\\xE0ria\"), React.createElement(\"input\", {\n    className: \"input-block__input\",\n    type: \"text\",\n    name: \"healthcard\",\n    value: _healthcard,\n    onChange: event => setHealthcard(event.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"btn btn--submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Actualitza les dades\")))), student && React.createElement(Link, {\n    className: \"btn btn--link\",\n    to: \"/home\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Torna\"), result && React.createElement(Feedback, {\n    message: result,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }));\n}\n\nexport default withRouter(UpdateStudent);","map":{"version":3,"sources":["/Users/jaume/Documents/sam/sam-app/src/components/StudentUpdate/index.js"],"names":["React","useContext","useEffect","useState","Link","withRouter","MyContext","logic","Feedback","UpdateStudent","history","studentId","undefined","student","setStudent","_name","setName","_surname","setSurname","_birthdate","setBirthdate","_healthcard","setHealthcard","result","setResult","retrieveStudent","id","response","name","surname","birthdate","healthcard","message","push","handleSubmit","event","preventDefault","handleUpdate","updateStudent","console","log","translateMessage","target","value"],"mappings":"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","sourcesContent":["import React , { useContext , useEffect , useState } from 'react'\nimport { Link  , withRouter } from 'react-router-dom'\nimport MyContext from '../ProviderContext'\nimport logic from \"../../logic\"\nimport Feedback from \"../Feedback\"\nimport './index.sass'\nimport \"../../styles/form.sass\"\n\nfunction UpdateStudent({ history }){\n    const { studentId } = useContext(MyContext)\n\n    const [student , setStudent] = useState(undefined)\n    \n    const [_name , setName] = useState(undefined)\n    const [_surname , setSurname] = useState(undefined)\n    const [_birthdate , setBirthdate] = useState(undefined)\n    const [_healthcard , setHealthcard] = useState(undefined)\n    \n    const [result , setResult] = useState(undefined)\n\n    useEffect( ()=>{\n        async function retrieveStudent(id){\n            try{\n                const response = await logic.retrieveStudent(id)\n                setStudent(response.student)\n\n                setName(response.student.name)\n                setSurname(response.student.surname)\n                setBirthdate(response.student.birthdate)\n                setHealthcard(response.student.healthcard)\n\n            }catch({ message }){\n                history.push(\"./home\")\n            }\n        }\n        retrieveStudent(studentId)\n    } , [setStudent , setName , setSurname , setBirthdate , setHealthcard , history , studentId])\n    \n    function handleSubmit(event){\n        event.preventDefault()\n        handleUpdate(studentId , _name , _surname , _birthdate , _healthcard)\n    }\n\n    async function handleUpdate(studentId , _name , _surname , birthdate , healthcard){\n        try{\n            await logic.updateStudent(studentId , _name , _surname , birthdate , healthcard)\n            history.push(\"/update-success\")\n        }catch({ message }){\n            console.log(message)\n            console.log(student.healthcard)\n            setResult(logic.translateMessage(message , undefined , student.healthcard))\n        }\n    }\n\n    return  <div className=\"form-wrapper\">\n                {student && <h1 className=\"home-header\">Formulari d'actualització</h1>}\n                {student && \n                    <form onSubmit={handleSubmit} className=\"form\">\n                        <fieldset className = \"fieldset\">\n                            <legend className=\"fieldset__legend\">\n                            Dades de l'inscrit/a\n                            </legend>\n                            <section className=\"fieldset__body\">\n                            <div className=\"input-block\">\n                                <label className=\"input-block__label\" htmlFor=\"name\">Nom</label>\n                                    <input className=\"input-block__input\" type=\"text\" name=\"name\" value={_name} onChange={ event => setName(event.target.value)}/>\n                            </div>\n                            <div className=\"input-block\">\n                                <label className=\"input-block__label\" htmlFor=\"surname\">Cognoms</label>\n                                    <input className=\"input-block__input\" type=\"text\" name=\"surname\" value={_surname} onChange={ event => setSurname(event.target.value)}/>\n                            </div>\n                            <div className=\"input-block\">\n                                <label className=\"input-block__label\" htmlFor=\"birthdate\">Data de naixement</label>\n                                    <input className=\"input-block__input\" type=\"text\" name=\"birthdate\" value={_birthdate} onChange={ event => setBirthdate(event.target.value)}/>\n                            </div>\n                            <div className=\"input-block\">\n                                <label className=\"input-block__label\" htmlFor=\"healthcard\">Targeta sanitària</label>\n                                    <input className=\"input-block__input\" type=\"text\" name=\"healthcard\" value={_healthcard} onChange={ event => setHealthcard(event.target.value)}/>\n                            </div>\n                            <button className=\"btn btn--submit\">Actualitza les dades</button>\n                            </section>\n                        </fieldset>\n                    </form>\n                }\n                {student && <Link className=\"btn btn--link\" to=\"/home\">Torna</Link>}\n                {result && <Feedback message={result}/>}\n            </div>\n        }\n\nexport default withRouter(UpdateStudent)\n    \n              \n"]},"metadata":{},"sourceType":"module"}